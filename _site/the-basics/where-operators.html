<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>SQL School - Filtering Data and Making Simple Calculations</title>
    
    <!-- external CSS link -->
    <link rel="stylesheet" href="http://about.modeanalytics.com/stylesheets/reset.css">
    <link rel="stylesheet" href="/css/sqlschool-style.css">
    <link rel="stylesheet" href="http://about.modeanalytics.com/stylesheets/fonts.css">
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css">
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>    
    
    <script src="http://about.modeanalytics.com/javascripts/all.js" type="text/javascript"></script>

    <!-- Image Links -->
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link href="/images/mode-favicon-black.ico" rel="shortcut icon" />

    <meta name="robots" content="index, follow" />
    <meta name="google-site-verification" content="IBG3eleFA9562xuyu46bQ-bnxEBla4yVjAQCfPsgPM0" />
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0;">

  </head>
  <body>
    <div id="page-wrap">
      <div id="header-small">
        <div class="wrap">
          <a href="http://modeanalytics.com">
            <div class="logo"></div>
          </a>
          <a href="http://sqlschool.modeanalytics.com" class="blog-header-link">SQL School</a>
          <nav>
            <ul>
              <li><a href="http://modeanalytics.com" class="no-underline">Back To Mode</a></li>
            </ul>
          </nav>
        </div>
      </div>
      <div id="container">
        <div class="bg">
          <div id="header">
            <div class="wrap">
              <a href="http://modeanalytics.com">
                <div class="logo"></div>
              </a>
              <a href="http://sqlschool.modeanalytics.com" class="blog-header-link">SQL School</a>
              <nav>
                <ul>
                  <li><a href="http://modeanalytics.com/" class="no-underline">Back To Mode</a></li>
                </ul>
              </nav>
            </div>
          </div>

          <div class="columns-container">

  <div class="sqlschool-content">
    <div class="breadcrumbs">
      <a href="/#the-basics">&laquo; Back to Index</a>
    </div>
    
    <div class="post-header">
      <h1 class="title">Filtering Data and Making Simple Calculations<h1>
    </div>
    
    <div class="post-body">
      <p>This lesson will use the same housing development data from the <a href="/the-basics/select-from.html">previous lesson</a>.</p>

<p>Start by running this code to remind yourself what&#39;s in the table that will be used in this tutorial. Remember to switch over to Mode and run any of the code you see in the grey boxes to get a sense of what the output will look like.
<div id="where"></div></p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">SELECT * FROM tutorial.us_housing_units
</code></pre></div>
<h3>The WHERE Clause</h3>

<p>So you know how to view some data using <code>SELECT</code> and <code>FROM</code>. The next step is filtering the data using the <code>WHERE</code> clause. Here&#39;s what it looks like:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">SELECT *
  FROM tutorial.us_housing_units
 WHERE month = 1
</code></pre></div>
<p><em>Note: the clauses always need to be in this order:</em> <code>SELECT</code>, <code>FROM</code>, <code>WHERE</code>.</p>

<p>The <code>WHERE</code> clause works in a plain-English way: the above query does the same thing as <code>SELECT * FROM tutorial.us_housing_units_completed</code>, except that the results will only include rows where the <code>month</code> column contains the value <strong>1</strong>.</p>

<p>In Excel, it is possible to sort data in such a way that one column can be reordered without reordering any of the other columns&mdash;though that could badly scramble your data. When using SQL, entire rows of data are preserved together. If you write a <code>WHERE</code> clause that filters based on values in one column, you will limit the results <em>in all columns</em> to rows that satisfy the condition. The idea is that each row is one data point or observation, and all the information contained in that row belongs together.</p>

<p>You can filter your results in a number of ways using comparison and logical operators.</p>

<h3>Comparison Operators</h3>

<p>The most basic way to filter data is using comparison operators. The easiest way to understand them is to start by looking at the list of them:</p>

<table>
  <tr><td>Equal to</td><td class="right"><code>=</code></td></tr>
  <tr><td>Not equal to</td><td class="right"><code><></code> or <code>!=</code></td></tr>
  <tr><td>Greater than</td><td class="right"><code>></code></td></tr>
  <tr><td>Less than</td><td class="right"><code><</code></td></tr>
  <tr><td>Greater than or equal to</td><td class="right"><code>>=</code></td></tr>
  <tr><td>Less than or equal to</td><td class="right"><code><=</code></td></tr>
</table>

<p>These make the most sense when applied to numerical columns. For example:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">SELECT *
  FROM tutorial.us_housing_units
 WHERE west &gt; 30
</code></pre></div>
<p>Try running that query with each of the operators in place of <code>&gt;</code>. Try some values other than <code>30</code> to get a sense of how this works. When you&#39;re ready, try to answer these questions:</p>

<div class="practice-prob">
  Did the West Region ever produce <em>more than 50,000</em> housing units in one month? Remember, the units in the table are already in thousands.
</div>

<div class="practice-prob-answer">
  <a href="https://modeanalytics.com/tutorial/reports/eb5326c39637" target="_blank">See the Answer &raquo;</a>
</div>

<div class="practice-prob">
  Did the South Region ever produce <em>20,000 or fewer</em> housing units in one month?
</div>

<div class="practice-prob-answer">
  <a href="https://modeanalytics.com/tutorial/reports/00e816870a30" target="_blank">See the Answer &raquo;</a>
</div>

<h3>Comparisons on non-numerical data</h3>

<p>All of the above operators work on non-numerical data as well. <code>=</code> and <code>!=</code> make perfect sense &mdash; they allow you to select rows that match or don&#39;t match any value, respectively. For example, run the following query and you&#39;ll notice that none of the January rows show up:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">SELECT *
  FROM tutorial.us_housing_units
 WHERE month_name != &#39;January&#39;
</code></pre></div>
<p>There are some important rules when using these operators, though. If you&#39;re using an operator with values that are non-numeric, you need to put the value in single quotes: <code>&#39;value&#39;</code>. <em>Note: SQL uses single quotes (as opposed to double quotes) in every instance in reference to column names as identified in the <a href="/the-basics/select-from.html">previous lesson</a>.</em></p>

<p>You can use <code>&gt;</code>, <code>&lt;</code>, and the rest of the operators on non-numeric columns as well &mdash; they filter based on alphabetical order. Try running this a couple times with different operators:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">SELECT *
  FROM tutorial.us_housing_units
 WHERE month_name &gt; &#39;January&#39;
</code></pre></div>
<p>If you&#39;re using <code>&gt;</code>, <code>&lt;</code>, <code>&gt;=</code>, or <code>&lt;=</code>, you don&#39;t necessarily need to be too specific about how you filter. Try this:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">SELECT *
  FROM tutorial.us_housing_units
 WHERE month_name &gt; &#39;J&#39;
</code></pre></div>
<p>The way SQL treats alphabetical ordering is a little bit tricky. You may have noticed in the above query that selecting <code>month_name &gt; &#39;J&#39;</code> will yield only rows in which <code>month_name</code> starts with &quot;j&quot; or later in the alphabet. &quot;Wait a minute,&quot; you might say. &quot;January is included in the results &mdash; shouldn&#39;t I have to use <code>month_name &gt;= &#39;J</code> to make that happen?&quot; SQL considers &#39;Ja&#39; to be greater than &#39;J&#39; because it has an extra letter. It&#39;s worth noting that most dictionaries would list &#39;Ja&#39; after &#39;J&#39; as well.</p>

<div class="practice-prob">
  Write a query that only shows rows for which the month name is February.
</div>

<div class="practice-prob-answer">
  <a href="https://modeanalytics.com/tutorial/reports/1b0ec94376a6" target="_blank">See the Answer &raquo;</a>
</div>

<div class="practice-prob">
 Write a query that only shows rows for which the <code>month_name</code> starts with the letter "M" or an earlier letter in the alphabet.
</div>

<div class="practice-prob-answer">
  <a href="https://modeanalytics.com/tutorial/reports/122ce812e03f" target="_blank">See the Answer &raquo;</a>
</div>

<h3>Arithmetic</h3>

<p>You can perform arithmetic in SQL using the same operators you would in Excel: <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>. SQL is a little tricky in that these only work in a given row. To clarify, you can only add values in multiple columns <strong>from the same row</strong> together using <code>+</code> &mdash; if you want to add values across multiple rows, you&#39;ll need to use <a href="/intermediate/aggregation-functions.html">Aggregation Functions</a>, which are covered in the Intermediate Tutorial.</p>

<p>The example below illustrates the use of <code>+</code>:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">SELECT year,
       month,
       west,
       south,
       west + south AS south_plus_west
  FROM tutorial.us_housing_units
</code></pre></div>
<p>The above example produces a column showing the sum of whatever is in the <code>south</code> and <code>west</code> columns for each row. You can chain arithmetic functions, including both column names and actual numbers:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">SELECT year,
       month,
       west,
       south,
       west + south - 4 * year AS nonsense_column
  FROM tutorial.us_housing_units
</code></pre></div>
<p>The columns that contain the arithmetic functions are called &quot;derived columns&quot; because they are generated by modifying the information that exists in the underlying data.</p>

<div class="practice-prob">
  Write a query that calculates the sum of all four regions in a separate column.
</div>

<div class="practice-prob-answer">
  <a href="https://modeanalytics.com/tutorial/reports/b83cefc05943" target="_blank">See the Answer &raquo;</a>
</div>

<p>As in Excel, you can use parenthesis to manage the <a href="http://www.mathgoodies.com/lessons/vol7/order_operations.html">order of operations</a>. For example, if you wanted to average the <code>west</code> and <code>south</code> columns, you could write something like this:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">SELECT year,
       month,
       west,
       south,
       (west + south)/2 AS south_west_avg
  FROM tutorial.us_housing_units
</code></pre></div>
<p>It occasionally makes sense to use parentheses even when it&#39;s not absolutely necessary just to make your query a bit easier to read. </p>

<h3>Practice time</h3>

<p>Sharpen your skills by tackling these questions:</p>

<div class="practice-prob">
  Write a query that returns all rows for which more units were produced in the West region than in the Midwest and Northeast combined.
</div>

<div class="practice-prob-answer">
  <a href="https://modeanalytics.com/tutorial/reports/bb17c0984edb" target="_blank">See the Answer &raquo;</a>
</div>

<div class="practice-prob">
 Write a query that calculates the percentage of all houses completed in the United States represented by each region. Only return results from the year 2000 and later. Hint: There should be four columns of percentages.
</div>

<div class="practice-prob-answer">
  <a href="https://modeanalytics.com/tutorial/reports/bffb59fa65a0" target="_blank">See the Answer &raquo;</a>
</div>

<p>Move on to the next lesson: <a href="/the-basics/logical-operators.html">Logical Operators</a>.</p>

    </div>
  
  </div>
      
</div>


          <div class="footer-push"></div>
        </div>
      </div> <!-- End #container -->

      <!-- Begin footer -->
      <div id="sqlschool-footer">
        <div id="footer-container">
          <div class="social-links"> <!-- put these icons into spans-->
            <a href="https://twitter.com/modeanalytics" class="social-icon" id="twitter" target="_blank">
              <i class="icon-twitter"></i></a>
            <a href = "https://www.facebook.com/ModeAnalytics" class="social-icon" id="facebook" target="_blank">
              <i class="icon-facebook"></i></a>
            <a href="http://www.linkedin.com/company/mode-analytics" class="social-icon" id="linkedin" target="_blank">
              <i class="icon-linkedin"></i></a>
            <a href="mailto:info@modeanalytics.com" class="social-icon" id="mail" target="_blank">
              <i class="icon-envelope"></i></a>
          </div>
          <div class = "mode-copyright">
            &copy; Mode Analytics 2014
          </div>   
        </div>
      </div>
    </div>
    <!-- Segment EYE OH -->
    <script type="text/javascript"> window.analytics=window.analytics||[],window.analytics.methods=["identify","group","track","page","pageview","alias","ready","on","once","off","trackLink","trackForm","trackClick","trackSubmit"],window.analytics.factory=function(t){return function(){var a=Array.prototype.slice.call(arguments);return a.unshift(t),window.analytics.push(a),window.analytics}};for(var i=0;i<window.analytics.methods.length;i++){var key=window.analytics.methods[i];window.analytics[key]=window.analytics.factory(key)}window.analytics.load=function(t){if(!document.getElementById("analytics-js")){var a=document.createElement("script");a.type="text/javascript",a.id="analytics-js",a.async=!0,a.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.io/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n)}},window.analytics.SNIPPET_VERSION="2.0.9",
    window.analytics.load("dhfb493gnn");
    window.analytics.page();
    </script>
  </body>
</html>
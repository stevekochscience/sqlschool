<html>
<head>  
  <!-- Image Links -->
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
  <link href="/images/mode-favicon-black.ico" rel="shortcut icon" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  
  <!-- CDNs for Bootstrap and Fonts -->
  <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css">
  <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css">
  <link href="//cloud.webtype.com/css/c014726f-64f1-4bf0-b9ff-6db715a1147a.css" rel="stylesheet" type="text/css" />
  <script type="text/javascript" src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
  <script type="text/javascript" src="//netdna.bootstrapcdn.com/bootstrap/3.0.3/js/bootstrap.min.js"></script>
  
  <!-- Mode Stylsheet-->
  <link rel="stylesheet" href="/css/mode-sqlschool.css">
  
  <title>Filtering Data and Making Simple Calculations - </title>

</head>
<body>
  <nav id="header-nav" role="navigation">
    <div class="container" id="header-container">
      
      <!-- Show the logo and, if on a phone, the menu toggle -->
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <ul class="navbar-logo">
          <li id="navbar-logo" ><a href="/"><img id = "header-logo" src="/images/logo.png" /></a></li>
          <li id="navbar-sqlschool"><a href="/">SQL SCHOOL</a></li>
        </ul>
      </div>
      <!-- Everything here gets hidden for phones -->
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav navbar-nav navbar-right">
          <li><a href="http://help.modeanalytics.com">Help</a></li>
          <li><a href="http://modeanalytics.com">Return to Mode</a></li>
        </ul>
      </div>
      
    </div>
  </nav>
  
  <section class="lesson">
  
  <div class="container">

    <div class="breadcrumbs col-sm-12">
      <a href="/#the-basics">&laquo; Back to Index</a>
    </div>
    
  </div>
</section>

<section class="question">
  <div class="container">
    <h2>Filtering Data and Making Simple Calculations</h2>
    
    <p>This lesson will use the same housing development data from the <a href="/the-basics/select-from.html">previous lesson</a>.</p>

<p>Start by running this code to remind yourself what&#39;s in the table that will be used in this tutorial. Remember to switch over to Mode and run any of the code you see in the grey boxes to get a sense of what the output will look like.</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">SELECT * FROM tutorial.us_housing_units_completed
</code></pre></div>
<h3>The WHERE Clause</h3>

<p>So you know how to view some data using <code>SELECT</code> and <code>FROM</code>. The next step is filtering the data using the <code>WHERE</code> clause. Here&#39;s what it looks like:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">SELECT *
  FROM tutorial.us_housing_units_completed
 WHERE month = 1
</code></pre></div>
<p><em>Note: the clauses always need to be in this order:</em> <code>SELECT</code>, <code>FROM</code>, <code>WHERE</code>.</p>

<p>The <code>WHERE</code> clause works in a plain-English way: the above query does the same thing as <code>SELECT * FROM tutorial.us_housing_units_completed</code>, except that the results will only include rows where the <code>month</code> column contains the value <strong>1</strong>.</p>

<p><strong>This part is really important: SQL deals with filtering an entire row at a time. In Excel, you can sort or filter one column at a time. In SQL, if you filter something in one column, entire rows will be omitted.</strong> The idea is that each row is one <em>data point</em> or <em>observation</em>, and all the information contained in that row belongs together.</p>

<p>You can filter your results in a number of ways using comparison and logical operators.</p>

<h3>Comparison Operators</h3>

<p>The most basic way to filter data is using comparison operators. The easiest way to understand them is to start by looking at the list of them:</p>

<table>
  <tr><td>Equal to</td><td class="right"><code>=</code></td></tr>
  <tr><td>Not equal to</td><td class="right"><code><></code> or <code>!=</code></td></tr>
  <tr><td>Greater than</td><td class="right"><code>></code></td></tr>
  <tr><td>Less than</td><td class="right"><code><</code></td></tr>
  <tr><td>Greater than or equal to</td><td class="right"><code>>=</code></td></tr>
  <tr><td>Less than or equal to</td><td class="right"><code><=</code></td></tr>
</table>

<p>These make the most sense when applied to numerical columns. For example:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">SELECT *
  FROM tutorial.us_housing_units_completed
 WHERE west &gt; 30
</code></pre></div>
<p>Try running that query with each of the operators in place of <code>&gt;</code>. Try some values other than <code>30</code> to get a sense of how this works. When you&#39;re ready, try to answer these questions:</p>

<div class="practice-prob">
  Did the West Region ever produce <em>more than 50,000</em> housing units in one month? Remember, the units in the table are already in thousands.
</div>

<div class="practice-prob-answer">
  <a href="https://modeanalytics.com/tutorial/reports/eb5326c39637" target="_blank">See the Answer &raquo;</a>
</div>

<div class="practice-prob">
  Did the South Region ever produce <em>20,000 or fewer</em> housing units in one month?
</div>

<div class="practice-prob-answer">
  <a href="https://modeanalytics.com/tutorial/reports/00e816870a30" target="_blank">See the Answer &raquo;</a>
</div>

<h3>Comparisons on non-numerical data</h3>

<p>All of the above operators work on non-numerical data as well. <code>=</code> and <code>!=</code> make perfect sense &mdash; they allow you to select rows that match or don&#39;t match any value, respectively. For example, run the following query and you&#39;ll notice that none of the January rows show up:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">SELECT *
  FROM tutorial.us_housing_units_completed
 WHERE month_name != &#39;January&#39;
</code></pre></div>
<p>There are some important rules when using these operators, though. If you&#39;re using an operator with values that are non-numeric, you need to put the value in single quotes: <code>&#39;value&#39;</code>. <em>Note: SQL uses single quotes (as opposed to double quotes) in every instance in reference to column names as identified in the <a href="/the-basics/select-from.html">previous lesson</a>.</em></p>

<p>You can use <code>&gt;</code>, <code>&lt;</code>, and the rest of the operators on non-numeric columns as well &mdash; they filter based on alphabetical order. Try running this a couple times with different operators:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">SELECT *
  FROM tutorial.us_housing_units_completed
 WHERE month_name &gt; &#39;January&#39;
</code></pre></div>
<p>If you&#39;re using <code>&gt;</code>, <code>&lt;</code>, <code>&gt;=</code>, or <code>&lt;=</code>, you don&#39;t necessarily need to be too specific about how you filter. Try this:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">SELECT *
  FROM tutorial.us_housing_units_completed
 WHERE month_name &gt; &#39;J&#39;
</code></pre></div>
<p>The way SQL treats alphabetical ordering is a little bit tricky. You may have noticed in the above query that selecting <code>month_name &gt; &#39;J&#39;</code> will yield only rows in which <code>month_name</code> starts with &quot;j&quot; or later in the alphabet. &quot;Wait a minute,&quot; you might say. &quot;January is included in the results &mdash; shouldn&#39;t I have to use <code>month_name &gt;= &#39;J</code> to make that happen?&quot; SQL considers &#39;Ja&#39; to be greater than &#39;J&#39; because it has an extra letter. It&#39;s worth noting that most dictionaries would list &#39;Ja&#39; after &#39;J&#39; as well.</p>

<div class="practice-prob">
  Write a query that only shows rows for which the month name is February.
</div>

<div class="practice-prob-answer">
  <a href="https://modeanalytics.com/tutorial/reports/1b0ec94376a6" target="_blank">See the Answer &raquo;</a>
</div>

<div class="practice-prob">
 Write a query that only shows rows for which the <code>month_name</code> starts with the letter "M" or an earlier letter in the alphabet.
</div>

<div class="practice-prob-answer">
  <a href="https://modeanalytics.com/tutorial/reports/122ce812e03f" target="_blank">See the Answer &raquo;</a>
</div>

<h3>Arithmetic</h3>

<p>You can perform arithmetic in SQL using the same operators you would in Excel: <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>. SQL is a little tricky in that these only work in a given row. To clarify, you can only add values in multiple columns <strong>from the same row</strong> together using <code>+</code> &mdash; if you want to add values across multiple rows, you&#39;ll need to use <a href="/intermediate-sql/aggregation-functions.html">Aggregation Functions</a>, which are covered in the Intermediate Tutorial.</p>

<p>The example below illustrates the use of <code>+</code>:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">SELECT year,
       month,
       west,
       south,
       west + south AS south_plus_west
  FROM tutorial.us_housing_units_completed
</code></pre></div>
<p>The above example produces a column showing the sum of whatever is in the <code>south</code> and <code>west</code> columns for each row. You can chain arithmetic functions, including both column names and actual numbers:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">SELECT year,
       month,
       west,
       south,
       west + south - 4 * year AS nonsense_column
  FROM tutorial.us_housing_units_completed
</code></pre></div>
<p>The columns that contain the arithmetic functions are called &quot;derived columns&quot; because they are generated by modifying the information that exists in the underlying data.</p>

<div class="practice-prob">
  Write a query that calculates the sum of all four regions in a separate column.
</div>

<div class="practice-prob-answer">
  <a href="https://modeanalytics.com/tutorial/reports/b83cefc05943" target="_blank">See the Answer &raquo;</a>
</div>

<p>As in Excel, you can use parenthesis to manage the <a href="http://www.mathgoodies.com/lessons/vol7/order_operations.html">order of operations</a>. For example, if you wanted to average the <code>west</code> and <code>south</code> columns, you could write something like this:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">SELECT year,
       month,
       west,
       south,
       (west + south)/2 AS south_west_avg
  FROM tutorial.us_housing_units_completed
</code></pre></div>
<p>It occasionally makes sense to use parentheses even when it&#39;s not absolutely necessary just to make your query a bit easier to read. </p>

<h3>Practice time</h3>

<p>Sharpen your skills by tackling these questions:</p>

<div class="practice-prob">
  Write a query that returns all rows for which more units were produced in the West region than in the Midwest and Northeast combined.
</div>

<div class="practice-prob-answer">
  <a href="https://modeanalytics.com/tutorial/reports/bb17c0984edb" target="_blank">See the Answer &raquo;</a>
</div>

<div class="practice-prob">
 Write a query that calculates the percentage of all houses completed in the United States represented by each region. Only return results from the year 2000 and later. Hint: There should be four columns of percentages.
</div>

<div class="practice-prob-answer">
  <a href="https://modeanalytics.com/tutorial/reports/bffb59fa65a0" target="_blank">See the Answer &raquo;</a>
</div>

<p>Move on to the next lesson: <a href="/the-basics/logical-operators.html">Logical Operators</a>.</p>

  
  </div>
  <div class = "push"></div>
</section>

  <footer class="footer">
    <div class="container">
      <nav class="navbar-footer">
        <ul class="nav navbar-nav">
        <li><a href="http://modeanalytics.com/">Home</a></li>
        <li><a href="http://blog.modeanalytics.com">Blog</a></li>
        </ul>
        <ul class="nav navbar-nav navbar-right">
          <li><a href="http://modeanalytics.com">&copy; Mode Analytics 2014</a></li>
        </ul>
      </nav>
    </div>
  </footer>
</body>
</html>
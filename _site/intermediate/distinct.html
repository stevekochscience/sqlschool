<html>
<head>  
  <!-- Image Links -->
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
  <link href="/images/mode-favicon-black.ico" rel="shortcut icon" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  
  <!-- CDNs for Bootstrap and Fonts -->
  <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css">
  <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css">
  <link href="//cloud.webtype.com/css/c014726f-64f1-4bf0-b9ff-6db715a1147a.css" rel="stylesheet" type="text/css" />
  <script type="text/javascript" src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
  <script type="text/javascript" src="//netdna.bootstrapcdn.com/bootstrap/3.0.3/js/bootstrap.min.js"></script>
  
  <!-- Mode Stylsheet-->
  <link rel="stylesheet" href="/css/mode-sqlschool.css">
  
  <title>Counting the Unique Values in a Column - </title>

</head>
<body>
  <nav id="header-nav" role="navigation">
    <div class="container" id="header-container">
      
      <!-- Show the logo and, if on a phone, the menu toggle -->
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <ul class="navbar-logo">
          <li id="navbar-logo" ><a href="/"><img id = "header-logo" src="/images/logo.png" /></a></li>
          <li id="navbar-sqlschool"><a href="/">SQL SCHOOL</a></li>
        </ul>
      </div>
      <!-- Everything here gets hidden for phones -->
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav navbar-nav navbar-right">
          <li><a href="http://help.modeanalytics.com">Help</a></li>
          <li><a href="http://modeanalytics.com">Return to Mode</a></li>
        </ul>
      </div>
      
    </div>
  </nav>
  
  <section class="lesson">
  
  <div class="container">

    <div class="breadcrumbs col-sm-12">
      <a href="/#intermediate">&laquo; Back to Index</a>
    </div>
    
  </div>
</section>

<section class="question">
  <div class="container">
    <h2>Counting the Unique Values in a Column</h2>
    
    <p>This lesson will use the same Apple stock price data from the <a href="/intermediate/aggregation-functions.html">previous lesson.</a></p>

<div class="tip">Start by running this code to remind yourself what's in the table that will be used in this tutorial. Remember to switch over to Mode and run any of the code you see in the grey boxes to get a sense of what the output will look like.</div>
<div class="highlight"><pre><code class="text language-text" data-lang="text">SELECT * FROM tutorial.aapl_historical_stock_price
</code></pre></div>
<h3>DISTINCT</h3>

<p>You&#39;ll occasionally want to look at only the unique values in a particular column. You can do this using <code>SELECT DISTINCT</code> syntax:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">SELECT DISTINCT month
  FROM tutorial.aapl_historical_stock_price
</code></pre></div>
<p>If you include 2 (or more) columns in a <code>SELECT DISTINCT</code> clause, your results will contain all of the unique pairs of those two columns:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">SELECT DISTINCT year, month
  FROM tutorial.aapl_historical_stock_price
</code></pre></div>
<p><em>Note: You only need to include <code>DISTINCT</code> once in your <code>SELECT</code> clause &mdash; you do not need to add it for each column name.</em></p>

<div class="practice-prob">
  Write a query that returns the unique values in the <code>year</code> column, in chronological order
</div>

<div class="practice-prob-answer">
  <a href="https://modeanalytics.com/tutorial/reports/2dde870b5811" target="_blank">See the Answer &raquo;</a>
</div>

<h3>Using  DISTINCT in aggregations</h3>

<p>You can use <code>DISTINCT</code> when performing an aggregation. You will probably use it most commonly with the <code>COUNT</code> function. When exploring a new data set it can be very helpful to know how many distinct values you&#39;re working with in a column. </p>

<!-- DEREK: Use this if you like it, or add something equivelant that makes sense to you.

"Keep in mind that when working with data in a real-world scenario, you will generally end up write several prelimenary queries in order to figure out the best approach to answering your initial question."

-->

<p>In this case, you should run the query below that counts the unique values in the <code>month</code> column.</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">SELECT COUNT(DISTINCT month) AS unqiue_months
  FROM tutorial.aapl_historical_stock_price
</code></pre></div>
<p>The results show that there are 12 unique values (other examples may be less obvious). That&#39;s a small enough number that you might be able to aggregate by month and be able to interpret the results fairly early. For example, you might follow this up by taking average trade volumes by month to get a sense of when Apple stock really moves:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">SELECT month,
       AVG(volume) AS avg_trade_volume
  FROM tutorial.aapl_historical_stock_price
 GROUP BY month
 ORDER BY 2 DESC
</code></pre></div>
<p>Okay, back to <code>DISTINCT</code>. You&#39;ll notice that <code>DISTINCT</code> goes inside the aggregation function rather than at the beginning of the <code>SELECT</code> clause. Of course, you can <code>SUM</code> or <code>AVG</code> the distinct values in a column, but there are fewer practical applications for them. For <code>MAX</code> and <code>MIN</code>, you probably shouldn&#39;t ever use <code>DISTINCT</code> because the results will be the same as without <code>DISTINCT</code>, and the <code>DISTINCT</code> function will make your query substantially slower to return results.</p>

<div class="practice-prob">
  Write a query that counts the number of unique values in the <code>month</code> column for each year.
</div>

<div class="practice-prob-answer">
  <a href="https://modeanalytics.com/tutorial/reports/ad26c0db22c5" target="_blank">See the Answer &raquo;</a>
</div>

<div class="practice-prob">
  Write a query that separately counts the number of unique values in the <code>month</code> column and the number of unique values in the `year` column.
</div>

<div class="practice-prob-answer">
  <a href="https://modeanalytics.com/tutorial/reports/bb4e07760340" target="_blank">See the Answer &raquo;</a>
</div>

<h3>DISTINCT Performance</h3>

<p>It is worth noting that using <code>DISTINCT</code>, particularly in aggregations, can slow your queries down quite a bit. We&#39;ll cover this in greater depth in the <a href="/advanced/faster-queries.html">advanced tutorial</a>, and provide an excellent workaround in a <a href="/solutions-to-common-problems/fast-count-distinct.html">pre-built recipe</a>.</p>

<p>Check out the next tutorial: <a href="/intermediate/case.html">Using Conditional Logic to Define New Columns</a></p>

  
  </div>
  <div class = "push"></div>
</section>

  <footer class="footer">
    <div class="container">
      <nav class="navbar-footer">
        <ul class="nav navbar-nav">
        <li><a href="http://modeanalytics.com/">Home</a></li>
        <li><a href="http://modeanalytics.com/press.html">Press</a></li>
        <li><a href="http://blog.modeanalytics.com">Blog</a></li>
        </ul>
        <ul class="nav navbar-nav navbar-right">
          <li><a href="http://modeanalytics.com">&copy; Mode Analytics 2013</a></li>
        </ul>
      </nav>
    </div>
  </footer>
</body>
</html>